{"time":"0002","tplId":"QUICKPAY@cashier-pay-failure-retrieval-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-pay-failure-retrieval-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"cashier-pay-failure-retrieval-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var show=amc.fn.show;var hide=amc.fn.hide;var create=amc.fn.create;var rpc=amc.rpcData;var marginLeft=5;var PATH=amc.path+\"alipay_msp_\";var CHARGE_FREE_PNG=PATH+\"free\";var windowWidth=window.innerWidth*0.8;var maxNameWidth=windowWidth-(amc.isPlus?170:145);var maxDetailWidth=windowWidth-(amc.isPlus?130:115);function onclick(b,c){if(b.value===\"cancel\"){amc.fn.exitConfirm();return}getTag(\"dlg\").close();var a={action:{name:\"/cashier/switchChannelSel;loc:destroy('cashier-pay-failure-retrieval-flex')\",},param:{}};if(b.value!==\"newCard\"){a.action[\"l2rmode\"]=\"1\"}a.param[\"selected_channel\"]=b.parentValue?b.parentValue:b.value;a.param[\"first_enter_cashier\"]=false;if(b.parentValue){a.param[\"child_channel\"]=b.childValue}document.asyncSubmit(a,function(d){if(d.pageloading===\"1\"){show(c)}else{if(d.pageloading===\"0\"){hide(c)}}});show(c)}function buildLogo(c,a){var b=create(\"div\");b.className=\"logo-size amc-margin-r-s\";if(a||c.value===\"cancel\"||c.value===\"newCard\"){return b}var d=create(\"img\",\"logo-size\",b);if(c.logo&&c.logo.indexOf(\"local:\")===0){d.src=amc.path+c.logo.substr(\"local:\".length)}else{if(c.logo){d.src=c.logo;d.defaultvalue=PATH+\"bank_logo\"}}if(c.disable){d.style.cssText=\"opacity:0.3\"}return b}function buildLoadingImg(c,b){if(!b){return}var a=create(\"div\",\"mc-align-center amc-justify-center right-img-box\",b);var d=create(\"img\",\"\",a);d.src=\"indicatior\";hide(d);return d}function buildUpperBox(d,c){if(!c){return}var e=create(\"div\",\"\",c);var b=create(\"label\",\"amc-font-m amc-light-color amc-ellipsis\"+(d.tail?\"\":\" amc-flex-1\"),e);b.innerText=d.name||\"\";if(d.disable){b.style.color=\"#ccc\"}if(d.tail){var a=create(\"label\",\"amc-font-m amc-light-color amc-ellipsis amc-flex-1\",e);a.innerText=d.tail||\"\";b.style.maxWidth=maxNameWidth;if(d.disable){a.style.color=\"#ccc\"}}return e}function buildLowerBox(e,d){if(!e.detail||!d){return}var c=create(\"div\",\"amc-margin-t-xs\",d);var b=create(\"label\",\"amc-font-s amc-text-slight-color amc-ellipsis\"+(e.chargeFree?\"\":\" amc-flex-1\"),c);b.className+=(e.chargeFree?\" amc-line-through\":\"\");b.innerText=e.detail||\"\";if(e.disable){b.style.color=\"#ccc\"}if(e.chargeFree){b.style.maxWidth=maxDetailWidth;var a=create(\"img\",\"icon\",c);a.src=CHARGE_FREE_PNG}return c}function buildCenterBox(b){var a=create(\"div\");a.className=\"amc-v-box amc-justify-center amc-flex-1\";buildUpperBox(b,a);buildLowerBox(b,a);return a}function buildPaymentItem(c,b){var a=create(\"div\");a.className=\"amc-align-center\"+(b?\" amc-pd-lr pd-tb-child\":\" amc-pd\");a.appendChild(buildLogo(c,b));a.appendChild(buildCenterBox(c));var d=buildLoadingImg(c,a);a.appendChild(d);if(c.disable){a.disabled=true}else{if(!c.children||!c.children.length){a.className+=\" amc-press-box\";a.onclick=function(){onclick(c,d)}}}return a}function buildChildren(d){if(!d.children){return}var a=d.children;for(var c=0;c<a.length;c++){var b=create(\"div\",\"amc-1px-line amc-margin-lr\",getTag(\"channelList\"));b.style.marginLeft=amc.isPlus?60:50;a[c][\"parentValue\"]=d.value;var e=buildPaymentItem(a[c],true);getTag(\"channelList\").appendChild(e)}}function onKeyDown(){if(event.which==4){amc.fn.exitConfirm()}}function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){getTag(\"errMsg\").innerText=rpc.errorMsg||\"\";var d=0;for(var b=0;rpc.payments&&b<rpc.payments.length;++b){var c=buildPaymentItem(rpc.payments[b]);var a=rpc.payments[b][\"value\"];if(a===\"newCard\"||a===\"cancel\"){create(\"div\",\"amc-adapt-line\",getTag(\"otherList\"));getTag(\"otherList\").appendChild(c)}else{if(d){create(\"div\",\"amc-adapt-line amc-margin-lr\",getTag(\"channelList\"))}getTag(\"channelList\").appendChild(c);buildChildren(rpc.payments[b]);d++}}getTag(\"channelList\").style.maxHeight=window.innerHeight*0.4;getTag(\"dlg\").style.width=windowWidth;if(amc.isAndroid){getTag(\"dlg\").style.paddingBottom=8}getTag(\"dlg\").showModal()};","tag":"text"}]},{"tag":"style","children":[{"text":".logo-size { width:25px; height:25px;}\n            .pageTitle { min-height: 60px; padding-left: 10px; padding-right: 10px;}\n            .flex-stretch { align-items: stretch;}\n            .title-line-2px{ height: 2PX;background-color: #d1d1d1;}\n            .icon { margin-left: 5px; width: 14px; align-self: center}\n            .pd-tb-child { padding-top: 8px; padding-bottom : 8px;}\n            .right-img-box { width: 22px; margin-left: 5px;}","tag":"text"}]}]},{"onload":"init()","tag":"body","children":[{"id":"dlg","tag":"dialog","children":[{"tag":"div","children":[{"id":"errMsg","tag":"label","css":"amc-text-center amc-font-l amc-flex-1"}],"css":"amc-justify-center amc-align-center amc-pd-tb pageTitle"},{"tag":"div","css":"title-line-2px"},{"id":"channelList","tag":"div","css":"amc-scroll-flex"},{"id":"otherList","tag":"div","css":"amc-v-box"}],"onkeydown":"onKeyDown()","css":"amc-v-box amc-dlg-box flex-stretch"}],"onkeydown":"onKeyDown()","css":"amc-body amc-opacity"}]},"format":"JSON","tplVersion":"5.0.8"}