{"time":"0002","tplId":"QUICKPAY@cashier-sms-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-sms-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"js/cashier-sms-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var rpc=amc.rpcData;var getTag=amc.fn.getById;var timer;var countDownNum=60;function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var a=amc.fn.getNav(amc.res.navBack,\"{{return}}\",\"{{phone_validate}}\",null,null,onBack,null);getTag(\"body\").insertBefore(a,getTag(\"commonFullTitle\"));if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}if(rpc.mobileMask){getTag(\"mainTitle\").innerText=amc.fn.i18nPlaceholderReplace(\"{{phone_sms_full}}\",rpc.mobileMask)}else{getTag(\"mainTitle\").innerText=\"{{phone_sms}}\"}if(rpc.smstip){getTag(\"mainTitle\").innerText=rpc.smstip}timer=setInterval(countDown,1000);countDown();if(amc.isAndroid){readSms()}getTag(\"pwd\").focus()}function onPwdInput(){var a=getTag(\"pwd\");a.style.cssText=\"color:#000\";var b=getTag(\"submit\");b.disabled=a.value.length>0?false:true}function readSms(){var b={action:{name:\"loc:readsms\"}};var a={smsread:rpc.smsread};b.action[\"params\"]=a;document.asyncSubmit(b,function(c){if(c.sms){getTag(\"pwd\").value=c.sms;onPwdInput()}})}function countDown(){var a=getTag(\"resendBtn\");if(countDownNum>0){a.innerText=amc.fn.i18nPlaceholderReplace(\"{{resend_after_full}}\",countDownNum);countDownNum-=1}else{a.innerText=\"{{resend_sms}}\";a.disabled=false;if(timer){clearInterval(timer);timer=0}}}function onResendClick(){if(countDownNum>0){return}var a={};a.action={};a.action[\"name\"]=\"/sms/resend\";document.asyncSubmit(a,function(b){});getTag(\"resendBtn\").disabled=true;getTag(\"pwd\").value=\"\";countDownNum=60;if(timer){clearInterval(timer);timer=0}timer=setInterval(countDown,1000)}function submitInfo(){var b={};var a={smscode:getTag(\"pwd\").value};a.smsValidateLoginType=rpc.smsValidateLoginType;b.action={};b.action[\"name\"]=rpc.nextAction||\"/cashier/payment\";b.action[\"loadtxt\"]=\"\";b.action[\"params\"]=rpc.params;b.param=a;document.asyncSubmit(b,function(c){if(c.pageloading===undefined){getTag(\"pwd\").style.cssText=\"color:#ff0000\"}else{amc.fn.shouldShowBtnIndicator(c,\"submit\",\"loading\")}});getTag(\"pwd\").blur();amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit\",\"loading\")}function dial(){var a=\"loc:tel('95188', '1')\";var b={action:{name:a}};document.submit(b);getTag(\"dlg\").close()}function onBack(){var a={title:\"\",message:\"{{confirm_exit}}\",okButton:\"{{confirm_btn}}\",cancelButton:\"{{cancel}}\"};document.confirm(a,function(b){if(b.ok){getTag(\"pwd\").blur();document.submit({action:{name:\"loc:exit\"}})}})}function gotoHelp(){document.submit({action:{name:\"loc:openweb('https://csmobile.alipay.com/detailSolution.htm?knowledgeType=1&scene=app_bksbdjym_zhishi&questionId=201602069387', '{{help}}')\"}})}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".phone-tip-box {\n        padding: 30px 50px;\n        background-color: #fff;\n    }\n\n    .tip-text {\n        font-size: 17px;\n        color: #777;\n        text-align: center;\n    }\n\n    .help-box {\n        margin-top: 15px;\n    }\n\n    .help-text {\n        font-size: 14px;\n        color: #108ee9;\n        text-align: center;\n        flex: 1.0;\n    }\n\n    .dlg-title-box {\n        margin-top: 21px;\n        margin-bottom: 6px;\n        padding: 0 15px;\n    }\n\n    .dlg-title {\n        font-size: 18px;\n        font-weight: bold;\n        text-align: center;\n        flex: 1;\n    }\n\n    .dlg-dot {\n        margin-top: 7px;\n        width: 4px;\n        height: 4px;\n        background-color: #777;\n        border-radius: 2px;\n    }\n\n    .dlg-list {\n        font-size: 15px;\n        margin-left: 6px;\n    }\n\n    .tip-box {\n        padding: 9px 15px 0 15px;\n    }\n\n    .pd-lr {\n        padding-left: 15px;\n        padding-right: 15px;\n    }\n\n    .pd-l {\n        padding-left: 15px;\n    }\n\n    .dlg-btn-text {\n        font-size: 17px;\n        color: #108ee9;\n        text-align:center;\n        margin: 11.5px 15px;\n    }\n\n    .dlg-line {\n        margin-top: 18px;\n    }\n\n\n.margin-lr {\n    margin-left: 15px;\n    margin-right: 15px;\n}\n\n.cell-l-box {\n    width: 76px;\n}\n\n.cell-l-text {\n    font-size: 16px;\n}\n\n.input {\n    flex:1.0;\n    border: 0;\n    color:#000;\n    font-size: 16px;\n    padding:0px;\n    white-space: nowrap;\n}\n\n.resend-btn-w {\n    width: 103px;\n}\n\n.btn-primary {\n    background-color:#108ee9;\n    border: 0;\n    border-radius: 5px;\n    color:#fff;\n    font-size:18px;\n    height: 42px;\n    max-height: 42px;\n    min-height: 42px;\n    flex: 1.0;\n}\n.btn-primary:active {\n    background-color: #1284D6;\n    color: #fff;\n}\n.btn-primary:disabled {\n    background-color: #ebebf0;\n    color: #d2d2d2;\n}\n\n.amc-dlg-width {\n    width: 270px;\n    max-width: 270px;\n    min-width: 270px;\n}\n\n.amc-dlg-box {\n    border: 0;\n    background-color: #fff;\n    border-radius: 8px;\n    width: 270px;\n    align-items: center;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{},{"id":"commonFullTitle","tag":"div","children":[{"id":"mainTitle","tag":"label","css":"tip-text amc-flex-1"}],"css":"pd-lr phone-tip-box amc-v-box"},{"id":"mainBody","tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{code}}","tag":"text"}],"css":"cell-l-text amc-flex-1 amc-ellipsis-2-line"}],"css":"cell-l-box"},{"tag":"div","children":[{"id":"pwd","autofocus":"true","placeholder":"{{sms_code}}","tag":"input","value":"","type":"number","css":"input","oninput":"onPwdInput()"}],"css":"amc-cell-m-box"},{"tag":"div","css":"amc-cell-v-line"},{"tag":"div","children":[{"id":"resendBtn","tag":"button","children":[{"text":"{{resend_sms}}","tag":"text"}],"onclick":"onResendClick()","css":"amc-inline-btn amc-theme-color","disabled":"true"}],"css":"amc-resend-btn-w"}],"css":"amc-cell pd-l"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","css":"amc-abs-space-v-l"},{},{"tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"submit","tag":"button","children":[{"text":"{{next}}","tag":"text"}],"onclick":"submitInfo()","css":"btn-primary","disabled":"true"}],"css":"margin-lr btn-primary amc-align-center amc-justify-center"},{"tag":"div","children":[{"tag":"label","children":[{"text":"{{sms_help}}","tag":"text"}],"onclick":"gotoHelp();","css":"help-text"}],"css":"help-box"}],"css":"amc-main"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.1.5"}