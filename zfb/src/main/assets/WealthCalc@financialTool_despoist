{"data":{"children":[{"children":[{"content":"text/html; charset=UTF-8","http-equiv":"Content-Type","tag":"meta"},{"src":"WealthCalc.bundle/financial.i18n","tag":"meta","type":"i18n"},{"src":"android-phone-wallet-wealthcalc/financial.i18n","tag":"meta","type":"i18n"},{"children":[{"tag":"text","text":"div {\n            display: flex;\n            flex-direction: row;\n            position: relative;\n        }\n        \n        .cell_left_label {\n            font-size: 14px;\n            color: #000000;\n        }\n        \n        .cell_right_label {\n            font-size: 14px;\n            color: #666666;\n        }\n        \n        .img_style {\n            height: 13px;\n            width: 9px;\n        }"}],"tag":"style"},{"children":[{"tag":"text","text":"var is_go_to_yuebao = false;\n\n        var itemIndex = 0;\n        var arrItem = new Array();\n        var arrLabelItem = new Array();\n\n        var arrHuoText = new Array();\n        var index_rate_huo = 0;\n        var arrHuoRate = new Array();\n\n        var old_total_money = \"\";\n        var old_total_day = \"\";\n        var total_money = 0;\n        var huo_day = 0;\n\n        var extInfo;\n\n        var arrDingText = new Array();\n        var arrDingRate = new Array();\n        var arrDingDay = new Array();\n        var index_rate_ding = 0;\n\n        var rate_data;\n\n        var is_loaded = false;\n\n        var WealthCalc_bundle = \"WealthCalc.bundle/\";\n        var UICommon_bundle = \"APCommonUI.bundle/\";\n        if (document.platform == \"android\") {\n            WealthCalc_bundle = \"android-phone-wallet-wealthcalc/com.alipay.mobile.wealthtools.app/\";\n            UICommon_bundle = \"android-phone-wallet-wealthcalc/com.alipay.mobile.wealthtools.app/\";\n        }\n\n        var openPage_bundle_value = \"WealthCalc\";\n        if (document.platform == \"android\") {\n            openPage_bundle_value = \"android-phone-wallet-wealthcalc\";\n        }\n\n        function changeItem(index) {\n\n            arrItem[index].style.backgroundColor = \"#ffffff\";\n            arrItem[1 - index].style.backgroundColor = \"#108ee9\";\n\n            arrLabelItem[index].style.color = \"#108ee9\";\n            arrLabelItem[1 - index].style.color = \"#ffffff\";\n\n            if (index == 0) {\n                document.getElementById(\"label_cunkuanqixian\").innerText = \"{{存款期限(天)}}\";\n                document.getElementById(\"input_day\").style.display = \"flex\";\n                document.getElementById(\"div_ding\").style.display = \"none\";\n                document.getElementById(\"img_arrow_right\").style.display = \"flex\";\n\n                document.getElementById(\"div_rate\").onclick = function () {\n                    select_rate_huo();\n                }\n\n                document.getElementById(\"div_days\").onclick = function () {\n\n                }\n\n                setup_huo_rate();\n            } else {\n                document.getElementById(\"label_cunkuanqixian\").innerText = \"{{存款期限}}\";\n                document.getElementById(\"input_day\").style.display = \"none\";\n                document.getElementById(\"div_ding\").style.display = \"flex\";\n                document.getElementById(\"img_arrow_right\").style.display = \"none\";\n\n                document.getElementById(\"div_rate\").onclick = function () {\n\n                }\n\n                document.getElementById(\"div_days\").onclick = function () {\n                    select_rate_ding();\n                }\n\n                setup_ding_rate();\n            }\n\n            document.getElementById(\"input_money\").blur();\n            document.getElementById(\"input_day\").blur();\n\n            total_calc();\n        }\n\n        function init_ui(data, noReset) {\n            if (!noReset) {\n                arrHuoText = new Array();\n                arrHuoRate = new Array();\n                arrDingText = new Array();\n                arrDingRate = new Array();\n                arrDingDay = new Array();\n            }\n            is_loaded = true;\n\n            rate_data = JSON.stringify(data);\n\n            var rateList = data[\"currentDepositRateList\"];\n            for (var i = 0; i < rateList.length; i++) {\n                arrHuoText.push(rateList[i][\"rateName\"]);\n                arrHuoRate.push(parseFloat(rateList[i][\"rate\"]));\n            }\n\n            setup_huo_rate();\n\n            extInfo = data[\"extInfo\"];\n\n            changeItem(itemIndex);\n\n            var fixedDepositRateList = data[\"fixedDepositRateList\"];\n            for (var i = 0; i < fixedDepositRateList.length; i++) {\n                arrDingText.push(fixedDepositRateList[i][\"rateName\"]);\n                arrDingRate.push(parseFloat(fixedDepositRateList[i][\"rate\"]));\n                arrDingDay.push(parseFloat(fixedDepositRateList[i][\"period\"]) / 12);\n\n            }\n\n            //format en\n            var lanLabel = document.createElement(\"label\");\n            lanLabel.innerText = \"{{年}}\";\n            if (lanLabel.innerText == \"Year\") {\n                document.getElementById(\"buttom_label\").innerText = \"This is the latest Deposit Rate released by PBOC on \" + data.extInfo.rateUpdateTime;\n            } else {\n                document.getElementById(\"buttom_label\").innerText = \"{{以上为央行}}\" + data.extInfo.rateUpdateTime + \"{{最新公布的存款基准利率}}\";\n            }\n\n            if (document.platform != \"android\") {\n                document.getElementById(\"J-option-menu\").style.fontSize = \"12px\";\n                document.getElementById(\"J-option-menu\").style.marginTop = \"4px\";\n            }\n            if (document.platform == \"android\") {\n                document.getElementById(\"img_yuebao_arrow\").style.marginTop = \"1px\";\n            }\n        }\n\n        function initDefaultUI() {\n            arrItem.push(document.getElementById(\"item_a\"));\n            arrItem.push(document.getElementById(\"item_b\"));\n\n            arrLabelItem.push(document.getElementById(\"label_a\"));\n            arrLabelItem.push(document.getElementById(\"label_b\"));\n\n            //### 图片做跨平台处理\n            var arrayImg = document.querySelectorAll(\".img_style\");\n            for (var i = 0; i < arrayImg.length; i++) {\n                if (document.platform == \"android\") {\n                    arrayImg[i].src = UICommon_bundle + \"tables_arrow\";\n                } else {\n                    arrayImg[i].src = UICommon_bundle + \"Tables_Arrow\";\n                }\n\n            }\n\n            document.getElementById(\"img_yuebao_arrow\").src = WealthCalc_bundle + \"arrow\";\n        }\n\n        function init() {\n            initDefaultUI();\n            var defaultRpcResult = '{\"currentDepositRateList\":[{\"period\":\"0\",\"periodName\":\"0.35%央行基准利率\",\"rate\":\"0.35\",\"rateName\":\"0.35%央行基准利率\"},{\"period\":\"0\",\"periodName\":\"2.68%余额宝7日年化收益率\",\"rate\":\"2.68\",\"rateName\":\"2.68%余额宝7日年化收益率\"}],\"depositRateList\":[{\"c1\":\"利率项目\",\"c2\":\"年利率(%)\",\"c3\":\"\"},{\"c1\":\"活期存款\",\"c2\":\"0.35\",\"c3\":\"\"},{\"c1\":\"3个月定期存款\",\"c2\":\"1.10\",\"c3\":\"\"},{\"c1\":\"6个月定期存款\",\"c2\":\"1.30\",\"c3\":\"\"},{\"c1\":\"1年定期存款\",\"c2\":\"1.50\",\"c3\":\"\"},{\"c1\":\"2年定期存款\",\"c2\":\"2.10\",\"c3\":\"\"},{\"c1\":\"3年定期存款\",\"c2\":\"2.75\",\"c3\":\"\"},{\"c1\":\"5年定期存款\",\"c2\":\"2.75\",\"c3\":\"\"}],\"extInfo\":{\"rateUpdateTime\":\"2015年\",\"transferInLabel\":\"转入\",\"transferInRate\":\"2.68\",\"transferInText\":\"同等本金,余额宝预估收益money元\",\"transferInUrl\":\"alipays://platformapi/startapp?appId=20000032\"},\"fixedDepositRateList\":[{\"period\":\"3\",\"periodName\":\"3个月定期\",\"rate\":\"1.10\",\"rateName\":\"3个月定期\"},{\"period\":\"6\",\"periodName\":\"6个月定期\",\"rate\":\"1.30\",\"rateName\":\"6个月定期\"},{\"period\":\"12\",\"periodName\":\"1年定期\",\"rate\":\"1.50\",\"rateName\":\"1年定期\"},{\"period\":\"24\",\"periodName\":\"2年定期\",\"rate\":\"2.10\",\"rateName\":\"2年定期\"},{\"period\":\"36\",\"periodName\":\"3年定期\",\"rate\":\"2.75\",\"rateName\":\"3年定期\"},{\"period\":\"60\",\"periodName\":\"5年定期\",\"rate\":\"2.75\",\"rateName\":\"5年定期\"}],\"resultCode\":\"100\",\"resultDesc\":\"处理成功\",\"resultView\":\"处理成功\",\"showType\":0,\"success\":true}';\n            init_ui(JSON.parse(defaultRpcResult), true);\n            document.invoke(\"rpc\", {\n                \"operationType\": \"alipay.mwealth.toolkit.interest.queryDepositRate\",\n                \"requestData\": [{}]\n            }, function (rsp) {\n\n                if (rsp.success) {\n\n                    var bizResult = rsp.result;\n                    if (bizResult.success) {\n\n                        init_ui(bizResult, false);\n\n                        document.setProp(\"userPreferences\", {\n                            \"key\": \"WealthCalc_yuedongweng_despoist\",\n                            \"business\": \"WealthCalc\",\n                            \"data\": bizResult\n                        });\n                    } else {\n\n                        var bizResult = document.getProp(\"userPreferences\", {\n                            \"key\": \"WealthCalc_yuedongweng_despoist\",\n                            \"business\": \"WealthCalc\"\n                        });\n\n                        init_ui(JSON.parse(bizResult), false);\n                    }\n                } else {\n\n                    var bizResult = document.getProp(\"userPreferences\", {\n                        \"key\": \"WealthCalc_yuedongweng_despoist\",\n                        \"business\": \"WealthCalc\"\n                    });\n\n                    init_ui(JSON.parse(bizResult), false);\n                }\n            });\n\n        }\n\n        function total_calc() {\n\n            if (is_loaded == false)\n                return;\n\n            var money = (0).toFixed(2);\n\n            if (itemIndex == 0) {\n\n                if (total_money > 0 && huo_day > 0) {\n                    document.getElementById(\"lixi\").innerText = fmoney((total_money * huo_day * arrHuoRate[index_rate_huo] / 100 / 360).toFixed(2));\n                    document.getElementById(\"benxi\").innerText = fmoney((total_money * huo_day * arrHuoRate[index_rate_huo] / 100 / 360 + total_money).toFixed(2));\n\n                    money = (total_money * huo_day * parseFloat(extInfo[\"transferInRate\"]) / 100 / 360).toFixed(2);\n                } else {\n                    document.getElementById(\"lixi\").innerText = \"0.00\";\n                    document.getElementById(\"benxi\").innerText = \"0.00\";\n                }\n\n            } else {\n                if (total_money > 0) {\n                    document.getElementById(\"lixi\").innerText = fmoney((total_money * arrDingRate[index_rate_ding] / 100 * arrDingDay[index_rate_ding]).toFixed(2));\n                    document.getElementById(\"benxi\").innerText = fmoney((total_money * arrDingRate[index_rate_ding] / 100 * arrDingDay[index_rate_ding] + total_money).toFixed(2));\n\n                    money = (total_money * arrDingDay[index_rate_ding] * 12 * 30 * parseFloat(extInfo[\"transferInRate\"]) / 100 / 360).toFixed(2);\n                } else {\n                    document.getElementById(\"lixi\").innerText = \"0.00\";\n                    document.getElementById(\"benxi\").innerText = \"0.00\";\n                }\n            }\n\n            if (extInfo) {\n                var text = extInfo[\"transferInText\"];\n\n                var temp = \" <font color='#ff6600'>\" + fmoney(money) + \"</font> \";\n\n                text = text.replace(\"money\", temp);\n\n                document.getElementById(\"ext_label\").innerText = text;\n\n                document.getElementById(\"ext_label_zhuanru\").innerText = extInfo[\"transferInLabel\"];\n\n                if (money <= 0) {\n                    document.getElementById(\"yuebao_zhuanru\").style.display = \"none\";\n                    is_go_to_yuebao = false;\n                } else {\n                    document.getElementById(\"yuebao_zhuanru\").style.display = \"flex\";\n                    is_go_to_yuebao = true;\n                }\n            }\n        }\n\n        function to_yuebao() {\n\n            if (is_loaded == false)\n                return;\n\n            if (is_go_to_yuebao) {\n\n                document.invoke(\"startApp\", {\n                    \"appId\": \"20000032\",\n                    \"param\": {\n                        \"animated\": true\n\n                    }\n                });\n            }\n        }\n\n        function setup_huo_rate() {\n\n            if (is_loaded == false)\n                return;\n\n            document.getElementById(\"label_huo_rate\").innerText = arrHuoRate[index_rate_huo];\n        }\n\n        function setup_ding_rate() {\n\n            if (is_loaded == false)\n                return;\n\n            document.getElementById(\"label_huo_rate\").innerText = arrDingRate[index_rate_ding].toFixed(2);\n            document.getElementById(\"label_ding_rate\").innerText = arrDingText[index_rate_ding];\n        }\n\n        function fmoney(s) {\n            var l = s.split(\".\")[0].split(\"\").reverse();\n\n            r = s.split(\".\")[1];\n            t = \"\";\n\n            for (i = 0; i < l.length; i++) {\n                t += l[i] + ((i + 1) % 3 == 0 && (i + 1) != l.length ? \",\" : \"\");\n            }\n\n            var ret = t.split(\"\").reverse().join(\"\");\n            if (r != undefined) {\n                ret = ret + \".\" + r;\n            }\n\n            return ret;\n        }\n\n        function input_money() {\n\n            var input = document.getElementById(\"input_money\").value;\n\n            input = input.replace(/,/g, '');\n\n            if (input == \".\")\n                input = \"0.\";\n\n            if (input == \"\") {\n                old_total_money = \"\";\n            }\n\n            var reg = \"^(([1-9]{1}\\\\d{0,6})|([0]{1}))(\\\\.(\\\\d){0,2})?$\";\n            var r = input.match(reg);\n            if (r == null) {\n\n                document.getElementById(\"input_money\").value = fmoney(old_total_money);\n            } else {\n\n                old_total_money = input;\n                document.getElementById(\"input_money\").value = fmoney(input);\n            }\n\n            total_money = parseFloat(old_total_money);\n\n            total_calc();\n        }\n\n        function input_day() {\n\n            var input = document.getElementById(\"input_day\").value;\n\n            if (input == \".\")\n                input = \"0.\";\n\n            if (input == \"\" || input == \"0\") {\n                old_total_day = \"\";\n                input = \"\";\n            }\n\n            var reg = \"^(([1-9]{1}\\\\d{0,3})|([0]{1}))?$\";\n            var r = input.match(reg);\n            if (r == null) {\n\n                document.getElementById(\"input_day\").value = old_total_day;\n            } else {\n\n                old_total_day = input;\n                document.getElementById(\"input_day\").value = input;\n            }\n\n            huo_day = parseFloat(old_total_day);\n\n            total_calc();\n        }\n\n        function select_rate_huo() {\n\n            if (is_loaded == false)\n                return;\n\n            var obj = {\n                'btns': arrHuoText,\n                'default': index_rate_huo,\n                'title': ''\n            };\n\n            document.picker(obj, function (data) {\n\n                index_rate_huo = data.index;\n                setup_huo_rate();\n                total_calc();\n            });\n        }\n\n        function select_rate_ding() {\n\n            if (is_loaded == false)\n                return;\n\n            var obj = {\n                'btns': arrDingText,\n                'default': index_rate_ding,\n                'title': ''\n            };\n\n            document.picker(obj, function (data) {\n\n                index_rate_ding = data.index;\n                setup_ding_rate();\n                total_calc();\n            });\n        }\n\n        function item_click() {\n\n            itemIndex = 1 - itemIndex;\n            changeItem(itemIndex);\n        }\n\n        function onDespoist_rate() {\n\n            if (is_loaded == false)\n                return;\n            if (document.platform != \"android\") {\n                document.invoke('openPage', {\n                    \"tplId\": \"WealthCalc@financialTool_despoist_rate\",\n                    \"defaultTitle\": \"{{利率表}}\",\n                    \"initData\": rate_data,\n                    \"bundle\": openPage_bundle_value\n                });\n            } else {\n                document.invoke('openPage', {\n                    \"tplId\": \"WealthCalc@financialTool_despoist_rate\",\n                    \"defaultTitle\": \"{{利率表}}\",\n                    \"initData\": rate_data,\n                    \"bundle_a\": openPage_bundle_value\n                });\n            }\n        }\n\n        function keydown_total_money() {\n\n            if (event.which == 10) {\n                if (itemIndex == 0) {\n                    document.getElementById(\"input_day\").focus();\n                } else {\n                    document.getElementById(\"input_money\").blur();\n                }\n            }\n        }\n\n        function keydown_total_day() {\n\n            if (event.which == 10) {\n                document.getElementById(\"input_day\").focus();\n            }\n        }"}],"tag":"script"}],"tag":"head"},{"children":[{"children":[{"tag":"div"},{"tag":"div"},{"children":[{"children":[{"tag":"text","text":"{{利率表}}"}],"id":"J-option-menu","onclick":"onDespoist_rate()","style":" color:#108ee9;font-size: 16px;","tag":"label"}],"tag":"div"}],"tag":"nav"},{"children":[{"children":[{"children":[{"children":[{"tag":"text","text":"{{活期}}"}],"id":"label_a","style":"font-size:12px; color:#108ee9; ","tag":"label"}],"id":"item_a","onclick":"item_click()","style":"border-radius:4px 4px 0px 0px 0px 0px 4px 4px;flex:1;align-items:center;justify-content:center; background-color:#ffffff;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"{{定期}}"}],"id":"label_b","style":"font-size:12px; color:#ffffff;","tag":"label"}],"id":"item_b","onclick":"item_click()","style":"border-radius:0px 0px 4px 4px 4px 4px 0px 0px;flex:1;align-items:center;justify-content:center; background-color:#108ee9;","tag":"div"}],"style":"width:221px; height:23px; border-radius:4px; border:1px #ffffff solid; margin-top:12px;","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"{{利息(元)}}"}],"style":"font-size:12px; color:#ffffff;","tag":"label"},{"id":"lixi","style":"font-size:29px; font-auto-adjust:true; color:#ffffff;  margin-top:8px; margin-right:15px; text-overflow:ellipsis; overflow:hidden; white-space:nowrap;","tag":"label"}],"style":"flex:1.001; flex-direction:column;","tag":"div"},{"style":"width:1PX; background-color:#4dc4f3;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"{{本息合计(元)}}"}],"style":"font-size:12px; color:#ffffff;","tag":"label"},{"id":"benxi","style":"font-size:29px; font-auto-adjust:true; color:#ffffff; margin-top:8px; text-overflow:ellipsis; overflow:hidden; white-space:nowrap;","tag":"label"}],"style":"flex:1; flex-direction:column; padding-left:15px;","tag":"div"}],"style":"flex:1; width:100%;padding:22px 15px 10px 15px;","tag":"div"}],"style":"background-color:#108ee9; height:137px; width:100%; flex-direction:column; align-items:center;","tag":"div"},{"children":[{"id":"ext_label","style":"font-size:12px; color:#108ee9; margin-left:15px;","tag":"label"},{"style":"flex:1;","tag":"div"},{"children":[{"id":"ext_label_zhuanru","style":"font-size:12px; color:#ff6600; margin-right:4px;","tag":"label"},{"id":"img_yuebao_arrow","style":"width:8px; height:10px;","tag":"img"}],"id":"yuebao_zhuanru","onclick":"to_yuebao()","style":"margin-right:15px; align-items:center; display:none;","tag":"div"}],"style":"height:30px; background-color:#eaf4fa; align-items:center;","tag":"div"},{"style":"height:1PX; background-color:#e5e5e5;","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"{{存款总额(元)}}"}],"css":"cell_left_label","tag":"label"},{"style":"flex:1;","tag":"div"},{"css":"cell_right_label","id":"input_money","oninput":"input_money()","onkeydown":"keydown_total_money()","placeholder":"{{输入存款金额}}","style":"width:150px; text-align:right;","tag":"input","type":"money"}],"style":"height:44px; padding-right:15px; align-items:center;","tag":"div"},{"style":"height:1PX; background-color:#e5e5e5;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"{{存款期限(天)}}"}],"css":"cell_left_label","id":"label_cunkuanqixian","tag":"label"},{"style":"flex:1;","tag":"div"},{"css":"cell_right_label","id":"input_day","oninput":"input_day()","onkeydown":"keydown_total_day()","placeholder":"{{输入存款天数}}","style":"width:150px; text-align:right;","tag":"input","type":"number"},{"children":[{"css":"cell_right_label","id":"label_ding_rate","style":"margin-right:5px;","tag":"label"},{"css":"img_style","tag":"img"}],"id":"div_ding","style":"align-items:center; display:none;","tag":"div"}],"id":"div_days","style":"height:44px; padding-right:15px; align-items:center;","tag":"div"},{"style":"height:1PX; background-color:#e5e5e5;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"{{年利率(%)}}"}],"css":"cell_left_label","tag":"label"},{"style":"flex:1;","tag":"div"},{"css":"cell_right_label","id":"label_huo_rate","style":"text-align:right; margin-right:5px;","tag":"label"},{"css":"img_style","id":"img_arrow_right","tag":"img"}],"id":"div_rate","style":"height:44px; align-items:center; padding-right:15px;","tag":"div"}],"style":"background-color:#ffffff; flex-direction:column; padding-left:15px;","tag":"div"},{"style":"height:1PX; background-color:#e5e5e5;","tag":"div"},{"id":"buttom_label","style":"font-size:12px; color:#999999; margin-left:15px; margin-top:4px;","tag":"label"}],"id":"bodyid","onload":"init();","style":"flex-direction:column; height:100%; background-color:#f5f5f9;overflow:scroll;","tag":"body"}],"tag":"html"},"format":"JSON","name":"financialTool_despoist","publishVersion":"151217","tag":"WealthCalc","time":"0023","tplId":"WealthCalc@financialTool_despoist","tplVersion":"5.0.3"}